{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_Wsd22ThtAXBEbnu0AkWYjsB1rwL0rkIQZuD3pWx0eZ3Ki0NR1BtimSmQlvKVrCix';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\n\nconst api = axios.create({\n  baseURL: 'https://api.thecatapi.com/v1/',\n  timeout: 2000,\n  headers: { 'x-api-key': API_KEY },\n});\n\nexport function fetchBreeds(url) {\n  return api.get(url);\n}\n\nexport function fetchCatByBreed(breedId) {\n  const URL = 'images/search';\n  return api.get(URL, {\n    params: {\n      breed_ids: breedId,\n    },\n  });\n}\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport 'slim-select/styles';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './styles.css';\n\nconst loader = document.querySelector('.loader');\nconst catInfoElement = document.querySelector('.cat-info');\nconst breedSelectElement = document.querySelector('.breed-select');\n\nfetchBreeds('breeds')\n  .then(({ data }) => {\n    const options = makeOptionsForSelect(data);\n    createSelect(options);\n  })\n  .catch(() => {\n    iziToast.show({\n      position: 'topRight',\n      messageColor: '#fff',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      color: '#ef5350',\n    });\n  })\n  .finally(() => {\n    loader.classList.add('hide');\n  });\n\nfunction makeOptionsForSelect(data) {\n  const options = data.map((item, inx) => ({\n    text: item.name,\n    value: item.id,\n  }));\n\n  const placeholder = {\n    text: 'Select breed',\n    placeholder: true,\n  };\n\n  return [placeholder, ...options];\n}\n\nfunction createSelect(options) {\n  breedSelectElement.classList.remove('hide');\n  const breedSelect = new SlimSelect({\n    select: '.breed-select',\n    data: options,\n    settings: {\n      showSearch: false,\n      class: ['.breed-select'],\n    },\n    events: {\n      afterChange: newVal => {\n        breedSelect.disable();\n        catInfoElement.classList.add('hide');\n        loader.classList.remove('hide');\n        fetchCatByBreed(newVal[0].value)\n          .then(({ data }) => {\n            catInfoElement.classList.remove('hide');\n            makeFullInfoTemplate(data);\n          })\n          .catch(() => {\n            console.log(13);\n            iziToast.show({\n              position: 'topRight',\n              messageColor: '#fff',\n              message: 'Oops! Something went wrong! Try reloading the page!',\n              color: '#ef5350',\n            });\n          })\n          .finally(() => {\n            loader.classList.add('hide');\n            breedSelect.enable();\n          });\n      },\n    },\n  });\n}\n\nfunction makeFullInfoTemplate(data) {\n  console.log(15, data);\n  if (!data.length || !data[0] || !data[0].breeds || !data[0].breeds[0]) {\n    catInfoElement.classList.add('hide');\n    console.log(1);\n    iziToast.show({\n      position: 'topRight',\n      messageColor: '#fff',\n      message: 'Oops! Something went wrong! Try reloading the page!',\n      color: '#ef5350',\n    });\n    return;\n  }\n\n  const catInfo = data[0].breeds[0];\n\n  const markUp = `<img src=\"${data[0].url}\" alt=\"${catInfo.name}\" width=\"300px\" />\n      <div>\n        <h2>${catInfo.name}</h2>\n        <p>${catInfo.description}</p>\n        <p><span class=\"bolt\">Temperament:</span> ${catInfo.temperament}</p>\n      </div>`;\n\n  catInfoElement.innerHTML = markUp;\n}\n"],"names":["API_KEY","api","axios","fetchBreeds","url","fetchCatByBreed","breedId","URL","loader","catInfoElement","breedSelectElement","data","options","makeOptionsForSelect","createSelect","iziToast","item","inx","breedSelect","SlimSelect","newVal","makeFullInfoTemplate","catInfo","markUp"],"mappings":"owBAEA,MAAMA,EACJ,wEAIIC,EAAMC,EAAM,OAAO,CACvB,QAAS,gCACT,QAAS,IACT,QAAS,CAAE,YAAaF,CAAS,CACnC,CAAC,EAEM,SAASG,EAAYC,EAAK,CAC/B,OAAOH,EAAI,IAAIG,CAAG,CACpB,CAEO,SAASC,EAAgBC,EAAS,CACvC,MAAMC,EAAM,gBACZ,OAAON,EAAI,IAAIM,EAAK,CAClB,OAAQ,CACN,UAAWD,CACZ,CACL,CAAG,CACH,CCjBA,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,WAAW,EACnDC,EAAqB,SAAS,cAAc,eAAe,EAEjEP,EAAY,QAAQ,EACjB,KAAK,CAAC,CAAE,KAAAQ,KAAW,CAClB,MAAMC,EAAUC,EAAqBF,CAAI,EACzCG,EAAaF,CAAO,CACxB,CAAG,EACA,MAAM,IAAM,CACXG,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,OACd,QAAS,sDACT,MAAO,SACb,CAAK,CACL,CAAG,EACA,QAAQ,IAAM,CACbP,EAAO,UAAU,IAAI,MAAM,CAC/B,CAAG,EAEH,SAASK,EAAqBF,EAAM,CAClC,MAAMC,EAAUD,EAAK,IAAI,CAACK,EAAMC,KAAS,CACvC,KAAMD,EAAK,KACX,MAAOA,EAAK,EACb,EAAC,EAOF,MAAO,CALa,CAClB,KAAM,eACN,YAAa,EACjB,EAEuB,GAAGJ,CAAO,CACjC,CAEA,SAASE,EAAaF,EAAS,CAC7BF,EAAmB,UAAU,OAAO,MAAM,EAC1C,MAAMQ,EAAc,IAAIC,EAAW,CACjC,OAAQ,gBACR,KAAMP,EACN,SAAU,CACR,WAAY,GACZ,MAAO,CAAC,eAAe,CACxB,EACD,OAAQ,CACN,YAAaQ,GAAU,CACrBF,EAAY,QAAO,EACnBT,EAAe,UAAU,IAAI,MAAM,EACnCD,EAAO,UAAU,OAAO,MAAM,EAC9BH,EAAgBe,EAAO,GAAG,KAAK,EAC5B,KAAK,CAAC,CAAE,KAAAT,KAAW,CAClBF,EAAe,UAAU,OAAO,MAAM,EACtCY,EAAqBV,CAAI,CACrC,CAAW,EACA,MAAM,IAAM,CACX,QAAQ,IAAI,EAAE,EACdI,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,OACd,QAAS,sDACT,MAAO,SACrB,CAAa,CACb,CAAW,EACA,QAAQ,IAAM,CACbP,EAAO,UAAU,IAAI,MAAM,EAC3BU,EAAY,OAAM,CAC9B,CAAW,CACJ,CACF,CACL,CAAG,CACH,CAEA,SAASG,EAAqBV,EAAM,CAElC,GADA,QAAQ,IAAI,GAAIA,CAAI,EAChB,CAACA,EAAK,QAAU,CAACA,EAAK,IAAM,CAACA,EAAK,GAAG,QAAU,CAACA,EAAK,GAAG,OAAO,GAAI,CACrEF,EAAe,UAAU,IAAI,MAAM,EACnC,QAAQ,IAAI,CAAC,EACbM,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,OACd,QAAS,sDACT,MAAO,SACb,CAAK,EACD,MACD,CAED,MAAMO,EAAUX,EAAK,GAAG,OAAO,GAEzBY,EAAS,aAAaZ,EAAK,GAAG,aAAaW,EAAQ;AAAA;AAAA,cAE7CA,EAAQ;AAAA,aACTA,EAAQ;AAAA,oDAC+BA,EAAQ;AAAA,cAG1Db,EAAe,UAAYc,CAC7B"}