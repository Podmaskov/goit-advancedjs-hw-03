{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY =\n  'live_Wsd22ThtAXBEbnu0AkWYjsB1rwL0rkIQZuD3pWx0eZ3Ki0NR1BtimSmQlvKVrCix';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\n\nconst api = axios.create({\n  baseURL: 'https://api.thecatapi.com/v1/',\n  timeout: 2000,\n  headers: { 'x-api-key': API_KEY },\n});\n\nexport function fetchBreeds(url) {\n  return api.get(url);\n}\n\nexport function fetchCatByBreed(breedId) {\n  const URL = 'images/search';\n  return api.get(URL, {\n    params: {\n      breed_ids: breedId,\n    },\n  });\n}\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\nimport 'slim-select/styles';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './styles.css';\n\nconst loader = document.querySelector('.loader');\nconst errorElement = document.querySelector('.error');\nconst catInfoElement = document.querySelector('.cat-info');\nconst breedSelectElement = document.querySelector('.breed-select');\n\nfetchBreeds('breeds')\n  .then(({ data }) => {\n    const options = makeOptionsForSelect(data);\n    createSelect(options);\n  })\n  .catch(error => {\n    errorElement.classList.remove('hide');\n    iziToast.show({\n      position: 'topRight',\n      messageColor: '#fff',\n      message: error.message,\n      color: '#ef5350',\n    });\n  })\n  .finally(() => {\n    loader.classList.add('hide');\n  });\n\nfunction makeOptionsForSelect(data) {\n  const options = data.map((item, inx) => ({\n    text: item.name,\n    value: item.id,\n  }));\n\n  const placeholder = {\n    text: 'Select breed',\n    placeholder: true,\n  };\n\n  return [placeholder, ...options];\n}\n\nfunction createSelect(options) {\n  breedSelectElement.classList.remove('hide');\n  const breedSelect = new SlimSelect({\n    select: '.breed-select',\n    data: options,\n    settings: {\n      showSearch: false,\n      class: ['.breed-select'],\n    },\n    events: {\n      afterChange: newVal => {\n        breedSelect.disable();\n        errorElement.classList.add('hide');\n        catInfoElement.classList.add('hide');\n        loader.classList.remove('hide');\n        fetchCatByBreed(newVal[0].value)\n          .then(({ data }) => {\n            catInfoElement.classList.remove('hide');\n            makeFullInfoTemplate(data);\n          })\n          .catch(error => {\n            errorElement.classList.remove('hide');\n            iziToast.show({\n              position: 'topRight',\n              messageColor: '#fff',\n              message: error.message,\n              color: '#ef5350',\n            });\n          })\n          .finally(() => {\n            loader.classList.add('hide');\n            breedSelect.enable();\n          });\n      },\n    },\n  });\n}\n\nfunction makeFullInfoTemplate(data) {\n  if (!data[0].breeds[0]) {\n    errorElement.classList.remove('hide');\n  }\n\n  const catInfo = data[0].breeds[0];\n\n  const markUp = `<img src=\"${data[0].url}\" alt=\"${catInfo.name}\" width=\"300px\" />\n      <div>\n        <h2>${catInfo.name}</h2>\n        <p>${catInfo.description}</p>\n        <p><span class=\"bolt\">Temperament:</span> ${catInfo.temperament}</p>\n      </div>`;\n\n  catInfoElement.innerHTML = markUp;\n}\n"],"names":["API_KEY","api","axios","fetchBreeds","url","fetchCatByBreed","breedId","URL","loader","errorElement","catInfoElement","breedSelectElement","data","options","makeOptionsForSelect","createSelect","error","iziToast","item","inx","breedSelect","SlimSelect","newVal","makeFullInfoTemplate","catInfo","markUp"],"mappings":"owBAEA,MAAMA,EACJ,wEAIIC,EAAMC,EAAM,OAAO,CACvB,QAAS,gCACT,QAAS,IACT,QAAS,CAAE,YAAaF,CAAS,CACnC,CAAC,EAEM,SAASG,EAAYC,EAAK,CAC/B,OAAOH,EAAI,IAAIG,CAAG,CACpB,CAEO,SAASC,EAAgBC,EAAS,CACvC,MAAMC,EAAM,gBACZ,OAAON,EAAI,IAAIM,EAAK,CAClB,OAAQ,CACN,UAAWD,CACZ,CACL,CAAG,CACH,CCjBA,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,QAAQ,EAC9CC,EAAiB,SAAS,cAAc,WAAW,EACnDC,EAAqB,SAAS,cAAc,eAAe,EAEjER,EAAY,QAAQ,EACjB,KAAK,CAAC,CAAE,KAAAS,KAAW,CAClB,MAAMC,EAAUC,EAAqBF,CAAI,EACzCG,EAAaF,CAAO,CACxB,CAAG,EACA,MAAMG,GAAS,CACdP,EAAa,UAAU,OAAO,MAAM,EACpCQ,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,OACd,QAASD,EAAM,QACf,MAAO,SACb,CAAK,CACL,CAAG,EACA,QAAQ,IAAM,CACbR,EAAO,UAAU,IAAI,MAAM,CAC/B,CAAG,EAEH,SAASM,EAAqBF,EAAM,CAClC,MAAMC,EAAUD,EAAK,IAAI,CAACM,EAAMC,KAAS,CACvC,KAAMD,EAAK,KACX,MAAOA,EAAK,EACb,EAAC,EAOF,MAAO,CALa,CAClB,KAAM,eACN,YAAa,EACjB,EAEuB,GAAGL,CAAO,CACjC,CAEA,SAASE,EAAaF,EAAS,CAC7BF,EAAmB,UAAU,OAAO,MAAM,EAC1C,MAAMS,EAAc,IAAIC,EAAW,CACjC,OAAQ,gBACR,KAAMR,EACN,SAAU,CACR,WAAY,GACZ,MAAO,CAAC,eAAe,CACxB,EACD,OAAQ,CACN,YAAaS,GAAU,CACrBF,EAAY,QAAO,EACnBX,EAAa,UAAU,IAAI,MAAM,EACjCC,EAAe,UAAU,IAAI,MAAM,EACnCF,EAAO,UAAU,OAAO,MAAM,EAC9BH,EAAgBiB,EAAO,GAAG,KAAK,EAC5B,KAAK,CAAC,CAAE,KAAAV,KAAW,CAClBF,EAAe,UAAU,OAAO,MAAM,EACtCa,EAAqBX,CAAI,CACrC,CAAW,EACA,MAAMI,GAAS,CACdP,EAAa,UAAU,OAAO,MAAM,EACpCQ,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,OACd,QAASD,EAAM,QACf,MAAO,SACrB,CAAa,CACb,CAAW,EACA,QAAQ,IAAM,CACbR,EAAO,UAAU,IAAI,MAAM,EAC3BY,EAAY,OAAM,CAC9B,CAAW,CACJ,CACF,CACL,CAAG,CACH,CAEA,SAASG,EAAqBX,EAAM,CAC7BA,EAAK,GAAG,OAAO,IAClBH,EAAa,UAAU,OAAO,MAAM,EAGtC,MAAMe,EAAUZ,EAAK,GAAG,OAAO,GAEzBa,EAAS,aAAab,EAAK,GAAG,aAAaY,EAAQ;AAAA;AAAA,cAE7CA,EAAQ;AAAA,aACTA,EAAQ;AAAA,oDAC+BA,EAAQ;AAAA,cAG1Dd,EAAe,UAAYe,CAC7B"}